<div class="container">
  <div class="row">
    <h3><%= @category.name %> </h3>

    <div class='menu-items'>
      <div class='navigation-menu'>
        <% if @category.has_parent? %>
          <%= link_to category_path(@category.parent) do %>
            <i class="fa fa-arrow-circle-left" aria-hidden="true"></i>
          <% end %>
        <% else %>
          <%= link_to root_path do %>
            <i class="fa fa-home" aria-hidden="true"></i>
          <% end %>
        <% end %>

        <%= arranged_tree_as_list(@category.children.arrange) do |category| %>
          <%= link_to(category_path(category), class: "btn btn-danger") do %>
            <%= category.name %> (<%= category.products.count %>)
          <% end %>
        <% end %>

      </div>

      <% @category.products.each do |product| %>
        <%= render 'product_card', {product: product} %>
      <% end %>

      <%= arranged_tree_as_list(@category.children.arrange) do |category| %>
        <% category.products.each do |product| %>
          <%= render 'product_card', {product: product} %>
        <% end %>
      <% end %>
    </div>
  </div>
</div>
