<div class="container">
  <div class="row">
    <h3><%= @category.name %> </h3>

    <div class='menu-items'>
      <div class='navigation-menu'>
        <% if @category.has_parent? %>
          <%= link_to category_path(@category.parent) do %>
            <i class="fa fa-arrow-circle-left" aria-hidden="true"></i>
          <% end %>
        <% else %>
          <%= link_to root_path do %>
            <i class="fa fa-home" aria-hidden="true"></i>
          <% end %>
        <% end %>

        <%= arranged_tree_as_list(@category.children.arrange) do |category| %>
          <%= link_to(category_path(category), class: "btn btn-danger") do %>
            <%= category.name %> (<%= category.products.where(active: true).count %>)
          <% end %>
        <% end %>

      </div>

      <% @category.products.where(active: true).each do |product| %>
        <div class="col-xs-12 col-sm-4 col-md-3">
          <%= render 'product_card', {product: product, order_item: @order_item} %>
        </div>
      <% end %>

      <%= arranged_tree_as_list(@category.children.arrange) do |category| %>
        <% category.products.where(active: true).each do |product| %>
          <div class="col-xs-12 col-sm-4 col-md-3">
            <%= render 'product_card', {product: product, order_item: @order_item} %>
          </div>
        <% end %>
      <% end %>

    </div>
  </div>
</div>
